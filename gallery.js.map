{"version":3,"file":"gallery.js","sources":["../src/img/javascript.svg","../src/js/UnsplashAPI.js","../src/js/render-function.js","../src/js/gallery.js"],"sourcesContent":["export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20aria-hidden='true'%20role='img'%20class='iconify%20iconify--logos'%20width='32'%20height='32'%20preserveAspectRatio='xMidYMid%20meet'%20viewBox='0%200%20256%20256'%3e%3cpath%20fill='%23F7DF1E'%20d='M0%200h256v256H0V0Z'%3e%3c/path%3e%3cpath%20d='m67.312%20213.932l19.59-11.856c3.78%206.701%207.218%2012.371%2015.465%2012.371c7.905%200%2012.89-3.092%2012.89-15.12v-81.798h24.057v82.138c0%2024.917-14.606%2036.259-35.916%2036.259c-19.245%200-30.416-9.967-36.087-21.996m85.07-2.576l19.588-11.341c5.157%208.421%2011.859%2014.607%2023.715%2014.607c9.969%200%2016.325-4.984%2016.325-11.858c0-8.248-6.53-11.17-17.528-15.98l-6.013-2.58c-17.357-7.387-28.87-16.667-28.87-36.257c0-18.044%2013.747-31.792%2035.228-31.792c15.294%200%2026.292%205.328%2034.196%2019.247l-18.732%2012.03c-4.125-7.389-8.591-10.31-15.465-10.31c-7.046%200-11.514%204.468-11.514%2010.31c0%207.217%204.468%2010.14%2014.778%2014.608l6.014%202.577c20.45%208.765%2031.963%2017.7%2031.963%2037.804c0%2021.654-17.012%2033.51-39.867%2033.51c-22.339%200-36.774-10.654-43.819-24.574'%3e%3c/path%3e%3c/svg%3e\"","import axios from \"axios\";\n\nexport default class UnsplashAPI {\n  #BASE_URL = 'https://api.unsplash.com/search/photos';\n  #API_KEY = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58';\n  #query = \"\"\n\n  // метод для популярних фото\n  async getPopularPhotos(page) {\n    const params = new URLSearchParams({\n      query: \"popular\",\n      page,\n      per_page: 12,\n      orientation: \"portrait\",\n      client_id: this.#API_KEY,\n    });\n\n    const { data } = await axios(`${this.#BASE_URL}?${params}`);\n    return data;\n  }\n\n  // метод для запиту зображеннь по пошуку\n  async getPhotos(page) {\n    const params = new URLSearchParams({\n      query: this.#query,\n      page,\n      per_page: 12,\n      orientation: \"portrait\",\n      client_id: this.#API_KEY,\n    });\n\n    const { data } = await axios(`${this.#BASE_URL}?${params}`);\n    return data;\n  }\n\n  // сетер для присвоєння значення в query\n  set query(newQuery) {\n    this.#query = newQuery; \n  }\n}\n","const renderImages = (images) => {\n  return images\n  .map(\n      image => `\n      <li class=\"gallery__item\">\n      <img class=\"gallery-img\" src=\"${image.urls.small}\" alt=\"${image.alt_description}\">\n      </li>\n      `\n  ).join(\"\")\n}\n\nexport default renderImages;\n\n// export default function renderImages(arr) {\n//   return arr\n//     .map(\n//       ({ urls: { small }, alt_description }) => `\n//       <li class=\"gallery__item\">\n//         <img class=\"gallery-img\" src=\"${small}\" alt=\"${alt_description}\" />\n//       </li>\n//   `\n//     )\n//     .join('');\n// }\n","import Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport err from '../img/javascript.svg';\n\nimport UnsplashAPI from './UnsplashAPI';\nimport renderImages from './render-function';\n\nconst galleryEl = document.querySelector('.gallery');\nconst form = document.querySelector('.js-search-form');\nconst loader = document.querySelector(\".loader\")\nconst container = document.getElementById('tui-pagination-container');\n\nform.addEventListener('submit', handleSubmit);\n\nconst pagination = new Pagination(container, {\n  totalItems: 0,\n  itemsPerPage: 12,\n  visiblePages: 5,\n  page: 1,\n});\nconst page = pagination.getCurrentPage();\n\nconst api = new UnsplashAPI();\napi.getPopularPhotos(page)\n  .then(data => {\n    console.log(data);\n    galleryEl.innerHTML = renderImages(data.results);\n    // додамо до пагінації загальну кількісь фото\n    pagination.reset(data.total);\n  })\n  .catch(error => \n    iziToast.show({\n      title: 'X',\n      message: `${error}` || \"Oooopps\",\n      position: 'center',\n      color: 'red',\n    })\n  )\n  .finally(() => {\n    loader.classList.add(\"visually-hidden\");\n  });\n\n// повісимо слухача події на пагінацію\npagination.on('afterMove', handlePagination);\n\n// пагінація для популярних фото\nfunction handlePagination(event) {\n  // номер сторінки, який натиснули в пагінації\n  const currentPage = event.page;\n  loader.classList.remove(\"visually-hidden\")\n  // зробимо запит з номером сторінки, який натиснули в пагінації\n  api\n    .getPopularPhotos(currentPage)\n    .then(data => galleryEl.innerHTML = renderImages(data.results))\n    .catch(error => \n      iziToast.show({\n        title: 'X',\n        message: `${error}` || \"Oooopps\",\n        position: 'center',\n        color: 'red',\n      })\n    )\n    .finally(() => loader.classList.add(\"visually-hidden\"));\n}\n\n// пагінація для фото, які прийшли за запитом користувача\nfunction handleSubmitPagination(event) {\n  loader.classList.remove(\"visually-hidden\")\n  const currentPage = event.page;\n  api.getPhotos(currentPage)\n    .then(data => galleryEl.innerHTML = renderImages(data.results))\n    .catch(error => \n      iziToast.show({\n        title: 'X',\n        message: `${error}` || \"Oooopps\",\n        position: 'center',\n        color: 'red',\n      })\n    )\n    .finally(() => loader.classList.add(\"visually-hidden\"));\n}\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  const inputValue = form.elements.query.value.trim();\n  console.log(inputValue);\n\n  if (!inputValue) {\n    iziToast.warning({\n      title: 'Caution',\n      message: 'The field is empty, please type your request',\n      position: 'topRight',\n      iconUrl: `${err}`,\n    });\n    return;\n  }\n  // відпшемося від слухача події, щоб не було збільшення запитів\n  pagination.off(\"afterMove\", handlePagination);\n  pagination.off(\"afterMove\", handleSubmitPagination);\n\n  // передамо дані, які ввів користувач у\n  api.query = inputValue;\n\n  loader.classList.remove(\"visually-hidden\");\n  // зробимо запит на сервер викликавши метод getPhotos\n  api.getPhotos(page).then(data => {\n    if(!data.results.length) {\n      iziToast.show({\n        title: 'X',\n        message: \"Oooopps, there is no photo\",\n        position: 'center',\n        color: 'red',\n      });\n      return;\n    }\n\n    if(data.total <= 12) {\n      container.classList.add(\"visually-hidden\");\n    } else {\n      container.classList.remove(\"visually-hidden\")\n    }\n\n    galleryEl.innerHTML = renderImages(data.results);\n    pagination.reset(data.total);\n  })\n  .catch(error => \n    iziToast.show({\n      title: 'X',\n      message: `${error}` || \"Oooopps\",\n      position: 'center',\n      color: 'red',\n    })\n  )\n  .finally(() => {\n    loader.classList.add(\"visually-hidden\");\n    event.target.reset();\n  });\n  // повісимо слухача події\n  pagination.on(\"afterMove\", handleSubmitPagination);\n}\n"],"names":["err","UnsplashAPI","__privateAdd","_BASE_URL","_API_KEY","_query","page","params","__privateGet","data","axios","newQuery","__privateSet","renderImages","images","image","galleryEl","form","loader","container","handleSubmit","pagination","Pagination","api","error","iziToast","handlePagination","event","currentPage","handleSubmitPagination","inputValue"],"mappings":"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"}