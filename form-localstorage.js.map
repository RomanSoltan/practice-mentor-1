{"version":3,"file":"form-localstorage.js","sources":["../src/js/form-localstorage.js"],"sourcesContent":["// TASK 1\n\n// Якщо імейл і пароль користувача збігаються, зберігайте дані\n// з форми при сабміті у локальне сховище і змінюй кнопку\n// login на logout і роби поля введення недоступними для змін.\n\n// При перезавантаженні сторінки, якщо користувач залогінений,\n// ми маємо бачити logout-кнопку та недоступні для зміни поля\n// з даними користувача.\n// Клік по кнопці logout повертає все до початкового вигляду\n// і видаляє дані користувача з локального сховища.\n\n// Якщо введені дані не збігаються з потрібними даними, викликати аlert і\n// повідомляти про помилку.\n\nconst USER_DATA = {\n  email: 'user@mail.com',\n  password: 'secret',\n};\n\n// створимо ключ для localStorage\nconst LS_KEY = 'user-data';\n\n// отримаємо доступ до елементів\nconst email = document.querySelector('[name=\"email\"]');\nconst password = document.querySelector('[name=\"password\"]');\nconst button = document.querySelector('.login-form button');\nconst form = document.querySelector('.login-form');\n\n// додамо слухач події на форму\nform.addEventListener('submit', handleSubmit);\n\n// populateData();\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  // // забираємо значення з інпутів\n  const emailValue = email.value.trim();\n  const passwordValue = password.value.trim();\n\n  // Робимо логіку Logout\n  if (button.textContent === \"Logout\") {\n    event.target.reset();\n    localStorage.removeItem(LS_KEY);\n    button.textContent = \"Login\";\n    email.removeAttribute('readonly');\n    password.removeAttribute('readonly');\n    return;\n  }\n\n  // зробимо перевірку на порожній рядок\n  if (emailValue === '' || passwordValue === '') {\n    return alert(\"Can't be empty fields!\");\n  }\n\n  // зробимо перевірку\n  if (emailValue === USER_DATA.email && passwordValue === USER_DATA.password) {\n    // зберігаємо значення в localStorage\n    localStorage.setItem(\n      LS_KEY,\n      JSON.stringify({\n        email: emailValue,\n        password: passwordValue,\n      })\n    );\n\n    // змінимо текст кнопки з login на logout\n    // зробимо поля введення недоступними для змін\n    button.textContent = 'Logout';\n    email.setAttribute('readonly', true);\n    password.setAttribute('readonly', true);\n  } else {\n    alert('Invalid Value');\n  }\n}\n\n// Перевірка чи є щось в localStorage\nif (localStorage.getItem(LS_KEY)) {\n  // розпарсимо дані з localStorage\n  const loginData = JSON.parse(localStorage.getItem(LS_KEY));\n  // Додаємо в поля значення з localStorage, якщо їх нема, то\n  // підставляємо порожній рядок, щоб не було undefined\n  email.value = loginData.email || '';\n  password.value = loginData.password || '';\n  // змінимо текст кнопки з login на logout\n  // зробимо поля введення недоступними для змін\n  button.textContent = 'Logout';\n  email.setAttribute('readonly', true);\n  password.setAttribute('readonly', true);\n}\n\n// інший спосіб \n// function populateData() {\n//   const loginData = JSON.parse(localStorage.getItem(LS_KEY));\n//   if (!loginData) {\n//     return;\n//   }\n//   email.value = loginData.email || \"\";\n//   password.value = loginData.password || \"\";\n//   button.textContent = 'Logout';\n//   email.setAttribute(\"readonly\", true);\n//   password.setAttribute(\"readonly\", true);\n// }\n\n\n\n"],"names":["USER_DATA","LS_KEY","email","password","button","form","handleSubmit","event","emailValue","passwordValue","loginData"],"mappings":"wFAeA,MAAMA,EAAY,CAChB,MAAO,gBACP,SAAU,QACZ,EAGMC,EAAS,YAGTC,EAAQ,SAAS,cAAc,gBAAgB,EAC/CC,EAAW,SAAS,cAAc,mBAAmB,EACrDC,EAAS,SAAS,cAAc,oBAAoB,EACpDC,EAAO,SAAS,cAAc,aAAa,EAGjDA,EAAK,iBAAiB,SAAUC,CAAY,EAI5C,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EAEpB,MAAMC,EAAaN,EAAM,MAAM,KAAI,EAC7BO,EAAgBN,EAAS,MAAM,KAAI,EAGzC,GAAIC,EAAO,cAAgB,SAAU,CACnCG,EAAM,OAAO,QACb,aAAa,WAAWN,CAAM,EAC9BG,EAAO,YAAc,QACrBF,EAAM,gBAAgB,UAAU,EAChCC,EAAS,gBAAgB,UAAU,EACnC,MACD,CAGD,GAAIK,IAAe,IAAMC,IAAkB,GACzC,OAAO,MAAM,wBAAwB,EAInCD,IAAeR,EAAU,OAASS,IAAkBT,EAAU,UAEhE,aAAa,QACXC,EACA,KAAK,UAAU,CACb,MAAOO,EACP,SAAUC,CAClB,CAAO,CACP,EAIIL,EAAO,YAAc,SACrBF,EAAM,aAAa,WAAY,EAAI,EACnCC,EAAS,aAAa,WAAY,EAAI,GAEtC,MAAM,eAAe,CAEzB,CAGA,GAAI,aAAa,QAAQF,CAAM,EAAG,CAEhC,MAAMS,EAAY,KAAK,MAAM,aAAa,QAAQT,CAAM,CAAC,EAGzDC,EAAM,MAAQQ,EAAU,OAAS,GACjCP,EAAS,MAAQO,EAAU,UAAY,GAGvCN,EAAO,YAAc,SACrBF,EAAM,aAAa,WAAY,EAAI,EACnCC,EAAS,aAAa,WAAY,EAAI,CACxC"}